package ch.heigvd.sym.myapplication.communication

import android.os.Looper
import android.os.Handler
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import java.io.BufferedReader
import java.io.InputStreamReader
import java.io.OutputStream
import java.net.HttpURLConnection
import java.net.URL
import java.util.*
import java.util.zip.Deflater
import java.util.zip.DeflaterOutputStream
import java.util.zip.Inflater
import java.util.zip.InflaterInputStream
import kotlin.concurrent.thread

/**
 * Authors : Axel Vallon, Lev Pozniakoff and Robin Gaudin
 * Date : 12.11.2021
 * SymComManager: Communication class
 */

class SymComManager(private var communicationEventListener: CommunicationEventListener? = null) {
    var centString =        "awog8HAFAUU6fA5p2Yvc8uNIP2TnRuLfLC1Mcty8Zfp5lx9vuAVodemFmgelB0PzFklD7o4xHXFeDZz1p3xX4OgdfgQ1ieF18duZ".toByteArray(Charsets.UTF_8)
    var centRepString =     "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa".toByteArray(Charsets.UTF_8)
    var milleString =       "pLNbvhHMskkBl8jnYYnHLoDk5xI7jGQwf4XZDqWHPmL3DGARDd1FsZwrkTHf8wOMrNPhqV8Q0pZYPbafd3Y9EL6CiSsMCMN9mGuJnI9zyvzLE29VOUy0RRxRw5k9KXO6ktwJAb6UKNnNp2DYDQqrLk9c77zpPKXUFY1TPsvCyghLCrCAlyi9B52lQYbmI6tBdOhSJjJrS1DbLYLGDwGhgFPEo0d9T6HeFwIBqBh12ioIYECZItXHrdY6qOiILvCFDowojQwDtyv79XMq0Im7EQB5BRW9TeO0smqUhLZtEtYwNbQBGbvt17F545a0qGTdOv4o4bdAZoNr3gnZ5ziY4STkZGtQ6iiGJth5xkDP8xBLueU5DJhVZNacuSTJCgPjIkWfYsWjTRbeWfkdZnwG4t8pXtPhvdMaNMSXgkyjYLc5yHeFlzPDrfFxPMCSII9uPpGDPZgKUmxBMWUWaY0yNAq99VoRYTiIo0ai1F7WKgUYOSO6tq2pxN8bwQguvW0QPZiPT1iBTsDJNpewTNBD1Roq5TLd9d0AbduxXzU8meGS2QytjvBZowErSe240UWNxn9HDgo6YuhWjXg0NLHjHDKvU6yqP68IAPuDEoLO7uQ0Mx9UD3K1DAkKWflWFrIVVwOmmW2EKnmY4OAZgcPs4fpzIPJ0V44DRbMHNSfxrTINlYWLcet2o8eAVdNWvrh0IcglHHB9QDUeAd9xK4hwHo36y6r2NOzhKhb2DknHxjkBzXe8DOe8Z7ppqDVnijTTuhfVmBova01LD2WORdKBQoKGpkigZoHpZcTqPQaIhhcnI8VqmmVffSXh8sRKuNyhjwKgVS23XNZZom1OZrwyJ1kKhuJlKyy39ZxlXdG5o1txO9KtuA4zUpfUSyZNCyCzAbMf33FryTw33np6NFNu8zxq3KqCztUjAvetWjhgz9pCqe6I2kuo4NfIGjVADXETeaRdFHzxEAZHm1WrFE5oHABYCrdcuBh648PP5Sry".toByteArray(Charsets.UTF_8)
    var milleRepString =    "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa".toByteArray(Charsets.UTF_8)
    var dixmilleString =    "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".toByteArray(Charsets.UTF_8)
    var dixmilleRepString = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa".toByteArray(Charsets.UTF_8)

    fun sendRequest(url: String, request: ByteArray, content_type: String = "text/plain", compressed: Boolean = false) {
            thread {
                val instant1 = Date() //for benchmark

                val connection = URL(url).openConnection() as HttpURLConnection
                connection.requestMethod = "POST"
                connection.setRequestProperty("Content-Type", content_type)
                // Add theses headers if it must be compressed
                if (compressed) {
                    connection.setRequestProperty("X-Network", "CSD")
                    connection.setRequestProperty("X-Content-Encoding", "deflate")
                }
                connection.doOutput = true

                try {
                    // Configure in case it must be compressed or not
                    val os: OutputStream = if (compressed) {
                        DeflaterOutputStream(connection.outputStream, Deflater(9, true))
                    } else {
                        connection.outputStream
                    }
                    os.write(request)
                    os.close()
                } catch (exception: Exception) {
                    exception.printStackTrace()
                }

                try {
                    val br = BufferedReader(
                        // Check if the data have been compressed or not
                        if (connection.headerFields["X-Content-Encoding"]?.isEmpty() == false) {
                            InputStreamReader(InflaterInputStream(connection.inputStream, Inflater(true)))
                        } else {
                            InputStreamReader(connection.inputStream)
                        }
                    )

                    // read answer as string
                    val response: String = br.readText()

                    // Send the response in the main thread
                    val mHandler = Handler(Looper.getMainLooper())
                    val runnable = Runnable {communicationEventListener?.handleServerResponse(response)}
                    mHandler.post( runnable )
                    br.close()
                } catch (exception: Exception) {
                    exception.printStackTrace()
                } finally {
                    connection.disconnect()
                }

            }
    }


}